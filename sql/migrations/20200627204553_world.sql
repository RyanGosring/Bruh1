DROP PROCEDURE IF EXISTS add_migration;
delimiter ??
CREATE PROCEDURE `add_migration`()
BEGIN
DECLARE v INT DEFAULT 1;
SET v = (SELECT COUNT(*) FROM `migrations` WHERE `id`='20200627204553');
IF v=0 THEN
INSERT INTO `migrations` VALUES ('20200627204553');
-- Add your query below.


-- add stormwind guard 80463 waypoints
UPDATE `creature` SET `position_x` = -9625.91, `position_y` = 648.695, `position_z` = 38.6521, `movement_type` = 2 WHERE `guid` = 80463;
INSERT INTO `creature_movement` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `waittime`, `wander_distance`, `script_id`) VALUES
(80463, 1, -9625.91, 648.695, 38.6521, 100, 0, 0, 0),
(80463, 2, -9623.76, 653.384, 38.6521, 100, 0, 0, 0),
(80463, 3, -9622.76, 656.105, 38.6521, 100, 0, 0, 0),
(80463, 4, -9619.55, 663.514, 38.6522, 100, 0, 0, 0),
(80463, 5, -9613.32, 678.183, 38.6521, 100, 2000, 0, 0),
(80463, 6, -9611.34, 683.016, 38.6521, 100, 0, 0, 0),
(80463, 7, -9611.34, 685.784, 38.6521, 100, 0, 0, 0),
(80463, 8, -9611.43, 686.799, 38.6521, 100, 0, 0, 0),
(80463, 9, -9612.43, 690.784, 38.6521, 100, 0, 0, 0),
(80463, 10, -9616.25, 691.774, 38.6521, 100, 0, 0, 0),
(80463, 11, -9619.87, 690.613, 38.6521, 100, 0, 0, 0),
(80463, 12, -9627.26, 676.629, 37.1529, 100, 0, 0, 0),
(80463, 13, -9630.66, 669.282, 37.1513, 100, 0, 0, 0),
(80463, 14, -9633.66, 662.105, 38.6522, 100, 0, 0, 0),
(80463, 15, -9635.15, 658.352, 38.6521, 100, 2000, 0, 0),
(80463, 16, -9635.84, 654.435, 38.6521, 100, 0, 0, 0),
(80463, 17, -9634.51, 650.732, 38.6521, 100, 0, 0, 0),
(80463, 18, -9631.16, 648.651, 38.6521, 100, 0, 0, 0),
(80463, 19, -9627.21, 647.762, 38.6521, 100, 0, 0, 0);

-- add stormwind guard 80455 waypoints
UPDATE `creature` SET `position_x` = -9635.84, `position_y` = 670.504, `position_z` = 52.5756, `movement_type` = 2 WHERE `guid` = 80455;
INSERT INTO `creature_movement` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `waittime`, `wander_distance`, `script_id`) VALUES
(80455, 1, -9635.84, 670.504, 52.5756, 100, 0, 0, 0),
(80455, 2, -9638.48, 662.928, 52.5756, 100, 0, 0, 0),
(80455, 3, -9638.7, 658.931, 52.5756, 100, 0, 0, 0),
(80455, 4, -9633.14, 654.6, 50.4932, 100, 0, 0, 0),
(80455, 5, -9629.9, 653.253, 48.5795, 100, 0, 0, 0),
(80455, 6, -9626.23, 652.409, 47.474, 100, 0, 0, 0),
(80455, 7, -9622.63, 652.93, 47.4739, 100, 0, 0, 0),
(80455, 8, -9620.84, 656.479, 47.4739, 100, 0, 0, 0),
(80455, 9, -9619.6, 660.315, 47.4739, 100, 0, 0, 0),
(80455, 10, -9616.38, 667.677, 47.4739, 100, 0, 0, 0),
(80455, 11, -9614.46, 671.513, 47.4739, 100, 0, 0, 0),
(80455, 12, -9611.32, 678.789, 47.4739, 100, 0, 0, 0),
(80455, 13, -9609.55, 682.391, 47.4739, 100, 0, 0, 0),
(80455, 14, -9615.16, 687.424, 48.6381, 100, 0, 0, 0),
(80455, 15, -9618.63, 688.961, 50.707, 100, 0, 0, 0),
(80455, 16, -9621.95, 690.225, 52.5753, 100, 0, 0, 0),
(80455, 17, -9625.85, 689.829, 52.5756, 100, 0, 0, 0),
(80455, 18, -9630.21, 683.398, 52.5756, 100, 0, 0, 0),
(80455, 19, -9631.69, 679.623, 52.5756, 100, 0, 0, 0),
(80455, 20, -9634.94, 672.239, 52.5756, 100, 0, 0, 0);

-- add stormwind guard 80444 waypoints
UPDATE `creature` SET `position_x` = -9628.23, `position_y` = 648.636, `position_z` = 62.7332, `movement_type` = 2 WHERE `guid` = 80444;
INSERT INTO `creature_movement` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `waittime`, `wander_distance`, `script_id`) VALUES
(80444, 1, -9628.23, 648.636, 62.7332, 100, 0, 0, 0),
(80444, 2, -9635.62, 651.89, 62.7336, 100, 0, 0, 0),
(80444, 3, -9649.08, 657.328, 62.678, 100, 0, 0, 0),
(80444, 4, -9645.38, 655.816, 62.6891, 100, 0, 0, 0),
(80444, 5, -9637.88, 652.785, 62.7337, 100, 0, 0, 0),
(80444, 6, -9626.8, 647.985, 62.7332, 100, 0, 0, 0),
(80444, 7, -9613.6, 641.953, 62.6781, 100, 0, 0, 0),
(80444, 8, -9620.9, 645.289, 62.7328, 100, 0, 0, 0);

-- add stormwind guard 80462 waypoints
UPDATE `creature` SET `movement_type` = 2 WHERE `guid` = 80462;
INSERT INTO `creature_movement` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `waittime`, `wander_distance`, `script_id`) VALUES
(80462, 1, -9621.15, 693.24, 62.7332, 100, 0, 0, 0),
(80462, 2, -9631.31, 697.477, 62.678, 100, 0, 0, 0),
(80462, 3, -9623.89, 694.383, 62.7337, 100, 0, 0, 0),
(80462, 4, -9616.57, 691.015, 62.733, 100, 0, 0, 0),
(80462, 5, -9609.09, 688.021, 62.7326, 100, 0, 0, 0),
(80462, 6, -9596.61, 682.74, 62.6781, 100, 0, 0, 0),
(80462, 7, -9603.99, 685.945, 62.7327, 100, 0, 0, 0),
(80462, 8, -9611.46, 688.906, 62.7327, 100, 0, 0, 0);

-- add stormwind guard 80484 waypoints
UPDATE `creature` SET `position_x` = -9790.6, `position_y` = 734.172, `position_z` = 33.0179, `movement_type` = 2 WHERE `guid` = 80484;
INSERT INTO `creature_movement` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `waittime`, `wander_distance`, `script_id`) VALUES
(80484, 1, -9790.6, 734.172, 33.0179, 100, 0, 0, 0),
(80484, 2, -9780.62, 722.212, 33.017, 100, 0, 0, 0),
(80484, 3, -9780.21, 710.461, 33.1088, 100, 0, 0, 0),
(80484, 4, -9786.44, 700.557, 33.0353, 100, 0, 0, 0),
(80484, 5, -9798.45, 695.196, 33.112, 100, 0, 0, 0),
(80484, 6, -9790.79, 697.754, 33.0282, 100, 0, 0, 0),
(80484, 7, -9782.18, 705.72, 33.0731, 100, 0, 0, 0),
(80484, 8, -9779.61, 717.149, 33.0392, 100, 0, 0, 0),
(80484, 9, -9780.62, 722.212, 33.017, 100, 0, 0, 0),
(80484, 10, -9787.31, 731.866, 33.0451, 100, 0, 0, 0),
(80484, 11, -9801.2, 734.852, 33.1115, 100, 0, 0, 0),
(80484, 12, -9812.29, 729.431, 33.089, 100, 0, 0, 0),
(80484, 13, -9818.15, 718.665, 33.1132, 100, 0, 0, 0),
(80484, 14, -9815.6, 706.033, 33.1109, 100, 0, 0, 0),
(80484, 15, -9813.02, 701.892, 33.1128, 100, 0, 0, 0),
(80484, 16, -9818.41, 712.983, 33.0263, 100, 0, 0, 0),
(80484, 17, -9815.06, 725.226, 33.1132, 100, 0, 0, 0),
(80484, 18, -9806.01, 733.877, 33.1115, 100, 0, 0, 0);

-- add missing guard
INSERT INTO `creature` (`guid`, `id`, `id2`, `id3`, `id4`, `map`, `display_id`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecsmin`, `spawntimesecsmax`, `wander_distance`, `health_percent`, `mana_percent`, `movement_type`, `spawn_flags`, `visibility_mod`, `patch_min`, `patch_max`) VALUES
(80473, 1423, 0, 0, 0, 0, 0, 0, -9611.2, 637.101, 51.6805, 0.887339, 285, 285, 1, 100, 0, 1, 0, 0, 0, 10);

-- npc's should roam
UPDATE `creature` SET `movement_type` = 1, `wander_distance` = 1 WHERE `guid` IN (80464, 80465, 80443, 80447, 80460, 80461, 80456, 80458, 80446, 80457, 80486);


-- End of migration.
END IF;
END??
delimiter ; 
CALL add_migration();
DROP PROCEDURE IF EXISTS add_migration;
