DROP PROCEDURE IF EXISTS add_migration;
delimiter ??
CREATE PROCEDURE `add_migration`()
BEGIN
DECLARE v INT DEFAULT 1;
SET v = (SELECT COUNT(*) FROM `migrations` WHERE `id`='20220219123344');
IF v=0 THEN
INSERT INTO `migrations` VALUES ('20220219123344');
-- Add your query below.


SET @POPULARITY_CONTEST_WINNER_DARNASSUS_EVENT = 110;
SET @POPULARITY_CONTEST_WINNER_IRONFORGE_EVENT = 111;
SET @POPULARITY_CONTEST_WINNER_STORMWIND_EVENT = 112;
SET @POPULARITY_CONTEST_WINNER_ORGRIMMAR_EVENT = 113;
SET @POPULARITY_CONTEST_WINNER_THUNDERBLUFF_EVENT = 114;
SET @POPULARITY_CONTEST_WINNER_UNDERCITY_EVENT = 115;
SET @POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID = 17555;
SET @POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID = 32760;
SET @POPULARITY_CONTEST_WINNER_STORMWIND_GGUID = 13263;
SET @POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID = 20591;
SET @POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID = 31660;
SET @POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID = 13787;
SET @POPULARITY_CONTEST_PEDDLE_CGUID = 2354;

-- Peddle.
UPDATE `creature_template` SET `unit_flags`=32768 WHERE `entry`=16075;

-- Some Gameobject corrections.
UPDATE `gameobject_template` SET `faction`=114 WHERE `entry` IN (181014,181015,181016,181017,181018,181019,181020,181021,181022,181024,181025,181027,181055,181086,181060,181087);
UPDATE `gameobject_template` SET `faction`=0, `patch`=7 WHERE `entry`=181073;

-- Undercity Contest Winning Peddle.
INSERT INTO `creature` (`guid`, `id`, `id2`, `id3`, `id4`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecsmin`, `spawntimesecsmax`, `wander_distance`, `health_percent`, `mana_percent`, `movement_type`, `spawn_flags`, `visibility_mod`, `patch_min`, `patch_max`) VALUES
    (@POPULARITY_CONTEST_PEDDLE_CGUID+1, 16075, 0, 0, 0, 1, 9666.29, 2518.08, 1360.08, 0.610865, 120, 120, 0, 100, 100, 0, 0, 0, 7, 10),    -- DA
    (@POPULARITY_CONTEST_PEDDLE_CGUID+2, 16075, 0, 0, 0, 0, -4866.89, -1030.8, 502.273, 5.48033, 120, 120, 0, 100, 100, 0, 0, 0, 7, 10),    -- IF
    (@POPULARITY_CONTEST_PEDDLE_CGUID+3, 16075, 0, 0, 0, 0, -8444.45, 334.545, 122.246, 2.26893, 120, 120, 0, 100, 100, 0, 0, 0, 7, 10),    -- SW
    (@POPULARITY_CONTEST_PEDDLE_CGUID+4, 16075, 0, 0, 0, 1, 1918.24, -4139.84, 40.4727, 4.85202, 120, 120, 0, 100, 100, 0, 0, 0, 7, 10),    -- OG
    (@POPULARITY_CONTEST_PEDDLE_CGUID+5, 16075, 0, 0, 0, 1, -1213.54, -101.545, 162.865, 1.20428, 120, 120, 0, 100, 100, 0, 0, 0, 7, 10),   -- TB
    (@POPULARITY_CONTEST_PEDDLE_CGUID+6, 16075, 0, 0, 0, 0, 1296.95, 331.865, -59.9998, 1.20428, 120, 120, 0, 100, 100, 0, 0, 0, 7, 10);    -- UC

INSERT INTO `game_event_creature` (`guid`, `event`) VALUES
    (@POPULARITY_CONTEST_PEDDLE_CGUID+1, @POPULARITY_CONTEST_WINNER_DARNASSUS_EVENT),
    (@POPULARITY_CONTEST_PEDDLE_CGUID+2, @POPULARITY_CONTEST_WINNER_IRONFORGE_EVENT),
    (@POPULARITY_CONTEST_PEDDLE_CGUID+3, @POPULARITY_CONTEST_WINNER_STORMWIND_EVENT),
    (@POPULARITY_CONTEST_PEDDLE_CGUID+4, @POPULARITY_CONTEST_WINNER_ORGRIMMAR_EVENT),
    (@POPULARITY_CONTEST_PEDDLE_CGUID+5, @POPULARITY_CONTEST_WINNER_THUNDERBLUFF_EVENT),
    (@POPULARITY_CONTEST_PEDDLE_CGUID+6, @POPULARITY_CONTEST_WINNER_UNDERCITY_EVENT);

-- Undercity Contest Winning Gameobjects.
INSERT INTO `gameobject` (`guid`, `id`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecsmin`, `spawntimesecsmax`, `animprogress`, `state`, `spawn_flags`, `visibility_mod`, `patch_min`, `patch_max`) VALUES
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+1, 181016, 0, 1291.54, 331.683, -60.0831, 1.93731, 0, 0, 0.824125, 0.566408, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+2, 181016, 0, 1298, 329.864, -60.0831, 0.767944, 0, 0, 0.374606, 0.927184, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+3, 181024, 0, 1307.84, 377.899, -51.5738, 1.29154, 0, 0, 0.601814, 0.798636, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+4, 181024, 0, 1307.93, 378.982, -53.309, 1.25664, 0, 0, 0.587785, 0.809017, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+5, 181025, 0, 1275.68, 315.589, -58.2578, 1.02974, 0, 0, 0.492423, 0.870356, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+6, 181025, 0, 1283.47, 344.265, -58.0373, 0.942477, 0, 0, 0.45399, 0.891007, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+7, 181025, 0, 1302.94, 308.317, -58.2572, 1.46608, 0, 0, 0.66913, 0.743145, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+8, 181025, 0, 1310.57, 336.817, -58.488, 1.72787, 0, 0, 0.760406, 0.649449, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+9, 181086, 0, 1294.49, 330.321, -60.0831, 1.29154, 0, 0, 0.601814, 0.798636, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+10, 181087, 0, 1290.13, 332.09, -60.0831, 1.32645, 0, 0, 0.615661, 0.788011, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+11, 181087, 0, 1290.74, 333.091, -60.0831, 1.44862, 0, 0, 0.66262, 0.748956, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+12, 181087, 0, 1291.58, 333.534, -60.0831, 2.19911, 0, 0, 0.891006, 0.453991, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+13, 181087, 0, 1292.6, 333.716, -60.0831, 4.15388, 0, 0, -0.874619, 0.48481, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+14, 181087, 0, 1298.34, 331.26, -60.0831, 2.58308, 0, 0, 0.961261, 0.27564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+15, 181087, 0, 1299.3, 330.869, -60.0831, 6.14356, 0, 0, -0.0697556, 0.997564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+16, 181087, 0, 1300.02, 329.854, -60.0831, 0.90757, 0, 0, 0.438371, 0.898794, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+17, 181087, 0, 1300.22, 326.837, -60.0831, 2.93214, 0, 0, 0.994521, 0.104536, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+18, 181087, 0, 1300.31, 328.454, -60.0831, 4.17134, 0, 0, -0.870356, 0.492424, 120, 120, 100, 1, 0, 0, 7, 10);
INSERT INTO `game_event_gameobject` SELECT gameobject.guid, @POPULARITY_CONTEST_WINNER_UNDERCITY_EVENT FROM `gameobject` WHERE gameobject.guid BETWEEN @POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+1 AND @POPULARITY_CONTEST_WINNER_UNDERCITY_GGUID+18;

-- Orgrimmar Contest Winning Gameobjects (I did this already last year but some stuff is missing, thats why i delete the old objects).
DELETE FROM `gameobject` WHERE `guid` IN (SELECT `guid` FROM `game_event_gameobject` WHERE `event`=@POPULARITY_CONTEST_WINNER_ORGRIMMAR_EVENT);
INSERT INTO `gameobject` (`guid`, `id`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecsmin`, `spawntimesecsmax`, `animprogress`, `state`, `spawn_flags`, `visibility_mod`, `patch_min`, `patch_max`) VALUES
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+1, 181016, 1, 1917.01, -4138.25, 40.3796, 4.41568, 0, 0, -0.803857, 0.594823, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+2, 181016, 1, 1924.46, -4137.94, 40.3811, 4.99164, 0, 0, -0.601814, 0.798636, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+3, 181021, 1, 1381.49, -4369.8, 52.8347, 3.28124, 0, 0, -0.997563, 0.0697661, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+4, 181021, 1, 1484.87, -4416.72, 53.1904, 0.104719, 0, 0, 0.0523357, 0.99863, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+5, 181021, 1, 1659.82, -4329.04, 75.2346, 2.68781, 0, 0, 0.97437, 0.224951, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+6, 181021, 1, 1661.55, -4344.48, 75.2458, 3.7001, 0, 0, -0.961261, 0.27564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+7, 181021, 1, 1672.88, -4320.48, 74.9852, 1.64061, 0, 0, 0.731353, 0.681999, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+8, 181021, 1, 1685.85, -4327.43, 74.8583, 0.698131, 0, 0, 0.34202, 0.939693, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+9, 181021, 1, 1687.43, -4340.11, 74.9505, 5.79449, 0, 0, -0.241921, 0.970296, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+10, 181021, 1, 1706.77, -3929.71, 71.8858, 5.2709, 0, 0, -0.484809, 0.87462, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+11, 181025, 1, 1910.07, -4126.43, 42.8192, 5.09636, 0, 0, -0.559193, 0.829038, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+12, 181025, 1, 1916.17, -4252.84, 40.584, 4.72984, 0, 0, -0.700909, 0.713251, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+13, 181025, 1, 1930, -4125.44, 42.9065, 4.57276, 0, 0, -0.754709, 0.656059, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+14, 181025, 1, 1941.25, -4251.97, 39.8368, 4.60767, 0, 0, -0.743144, 0.669131, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+15, 181086, 1, 1920.9, -4138.83, 40.3446, 4.76475, 0, 0, -0.688354, 0.725374, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+16, 181087, 1, 1915.15, -4137.65, 40.4083, 5.37562, 0, 0, -0.438371, 0.898794, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+17, 181087, 1, 1915.54, -4139.13, 40.4075, 6.14356, 0, 0, -0.0697556, 0.997564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+18, 181087, 1, 1916.38, -4140.26, 40.4081, 0.90757, 0, 0, 0.438371, 0.898794, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+19, 181087, 1, 1917.35, -4140.83, 40.4098, 4.17134, 0, 0, -0.870356, 0.492424, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+20, 181087, 1, 1924.86, -4139.68, 40.4048, 2.93214, 0, 0, 0.994521, 0.104536, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+21, 181087, 1, 1925.43, -4140.79, 40.3955, 1.32645, 0, 0, 0.615661, 0.788011, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+22, 181087, 1, 1926.18, -4141.52, 40.3869, 1.44862, 0, 0, 0.66262, 0.748956, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+23, 181087, 1, 1927.15, -4141.59, 40.3858, 2.19911, 0, 0, 0.891006, 0.453991, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+24, 181087, 1, 1928.18, -4141.17, 40.3907, 4.15388, 0, 0, -0.874619, 0.48481, 120, 120, 100, 1, 0, 0, 7, 10);
INSERT INTO `game_event_gameobject` SELECT gameobject.guid, @POPULARITY_CONTEST_WINNER_ORGRIMMAR_EVENT FROM `gameobject` WHERE gameobject.guid BETWEEN @POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+1 AND @POPULARITY_CONTEST_WINNER_ORGRIMMAR_GGUID+24;

-- Thunderbluff Contest Winning Gameobjects.
INSERT INTO `gameobject` (`guid`, `id`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecsmin`, `spawntimesecsmax`, `animprogress`, `state`, `spawn_flags`, `visibility_mod`, `patch_min`, `patch_max`) VALUES
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+1, 181016, 1, -1213.19, -102.992, 162.85, 2.1293, 0, 0, 0.874619, 0.48481, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+2, 181016, 1, -1206.15, -103.015, 162.865, 1.06465, 0, 0, 0.507538, 0.861629, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+3, 181020, 1, -1204.61, 25.1163, 181.123, 0.750491, 0, 0, 0.366501, 0.930418, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+4, 181020, 1, -1200.74, 40.0504, 180.859, 4.93928, 0, 0, -0.622514, 0.782609, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+5, 181020, 1, -1192.92, 22.2192, 181.24, 1.90241, 0, 0, 0.814116, 0.580703, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+6, 181020, 1, -1189.54, 36.9993, 180.617, 3.87463, 0, 0, -0.93358, 0.358368, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+7, 181021, 1, -1277.65, 49.8685, 144.238, 0.558504, 0, 0, 0.275637, 0.961262, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+8, 181024, 1, -1215.22, -108.286, 171.342, 1.71042, 0, 0, 0.754709, 0.656059, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+9, 181024, 1, -1203.54, -108.963, 170.828, 1.3439, 0, 0, 0.622514, 0.782609, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+10, 181025, 1, -1219.47, -108.516, 163.443, 1.74533, 0, 0, 0.766044, 0.642789, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+11, 181025, 1, -1213.19, -124.699, 191.634, 3.71755, 0, 0, -0.958819, 0.284016, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+12, 181025, 1, -1206.81, -122.422, 193.272, 0.366518, 0, 0, 0.182235, 0.983255, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+13, 181025, 1, -1199.63, -110.76, 162.89, 1.51844, 0, 0, 0.688354, 0.725374, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+14, 181086, 1, -1209.8, -102.557, 162.853, 1.50098, 0, 0, 0.681998, 0.731354, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+15, 181087, 1, -1219.32, -103.334, 163.128, 4.17134, 0, 0, -0.870356, 0.492424, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+16, 181087, 1, -1217.96, -102.043, 162.86, 0.90757, 0, 0, 0.438371, 0.898794, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+17, 181087, 1, -1216.21, -101.659, 162.827, 6.14356, 0, 0, -0.0697556, 0.997564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+18, 181087, 1, -1214.65, -102.141, 162.864, 2.58308, 0, 0, 0.961261, 0.27564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+19, 181087, 1, -1205.11, -101.787, 162.816, 2.93214, 0, 0, 0.994521, 0.104536, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+20, 181087, 1, -1203.54, -101.896, 162.816, 1.32645, 0, 0, 0.615661, 0.788011, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+21, 181087, 1, -1202.04, -102.817, 162.869, 1.44862, 0, 0, 0.66262, 0.748956, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+22, 181087, 1, -1200.52, -104.445, 162.89, 2.19911, 0, 0, 0.891006, 0.453991, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+23, 181087, 1, -1199.17, -107.427, 162.89, 4.15388, 0, 0, -0.874619, 0.48481, 120, 120, 100, 1, 0, 0, 7, 10);   
INSERT INTO `game_event_gameobject` SELECT gameobject.guid, @POPULARITY_CONTEST_WINNER_THUNDERBLUFF_EVENT FROM `gameobject` WHERE gameobject.guid BETWEEN @POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+1 AND @POPULARITY_CONTEST_WINNER_THUNDERBLUFF_GGUID+23;

-- Ironforge Contest Winning Gameobjects.
INSERT INTO `gameobject` (`guid`, `id`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecsmin`, `spawntimesecsmax`, `animprogress`, `state`, `spawn_flags`, `visibility_mod`, `patch_min`, `patch_max`) VALUES
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+1, 181016, 0, -4862.29, -1034.35, 502.19, 5.88176, 0, 0, -0.199368, 0.979925, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+2, 181016, 0, -4854.53, -1028.77, 502.19, 4.93928, 0, 0, -0.622514, 0.782609, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+3, 181021, 0, -5013.39, -862.519, 524.679, 0.698131, 0, 0, 0.34202, 0.939693, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+4, 181021, 0, -5003.33, -874.714, 524.838, 0.680677, 0, 0, 0.333806, 0.942642, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+5, 181021, 0, -4994.78, -847.123, 524.522, 3.82227, 0, 0, -0.942641, 0.333808, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+6, 181021, 0, -4993.28, -886.917, 524.6, 0.680677, 0, 0, 0.333806, 0.942642, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+7, 181021, 0, -4984.71, -859.337, 524.799, 3.82227, 0, 0, -0.942641, 0.333808, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+8, 181021, 0, -4974.65, -871.542, 524.529, 3.83973, 0, 0, -0.939692, 0.34202, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+9, 181021, 0, -4641.6, -1178.9, 515.026, 4.2237, 0, 0, -0.857167, 0.515038, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+10, 181021, 0, -4634.71, -1025.57, 514.933, 1.8675, 0, 0, 0.803857, 0.594823, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+11, 181024, 0, -4830.2, -1066.31, 513.329, 5.39307, 0, 0, -0.430511, 0.902586, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+12, 181025, 0, -4832.54, -1071.08, 504.596, 5.39307, 0, 0, -0.430511, 0.902586, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+13, 181025, 0, -4825.13, -1064.14, 504.505, 5.42797, 0, 0, -0.414693, 0.909961, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+14, 181086, 0, -4859.17, -1031.14, 502.19, 5.37562, 0, 0, -0.438371, 0.898794, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+15, 181087, 0, -4860.69, -1036.22, 502.19, 6.14356, 0, 0, -0.0697556, 0.997564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+16, 181087, 0, -4860.09, -1035.1, 502.19, 1.32645, 0, 0, 0.615661, 0.788011, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+17, 181087, 0, -4859.07, -1036.16, 502.19, 4.17134, 0, 0, -0.870356, 0.492424, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+18, 181087, 0, -4858.94, -1035.18, 502.19, 2.19911, 0, 0, 0.891006, 0.453991, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+19, 181087, 0, -4855.59, -1030.04, 502.19, 2.93214, 0, 0, 0.994521, 0.104536, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+20, 181087, 0, -4855.49, -1028.71, 502.19, 2.58308, 0, 0, 0.961261, 0.27564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+21, 181087, 0, -4854.39, -1031.51, 502.19, 4.15388, 0, 0, -0.874619, 0.48481, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+22, 181087, 0, -4854.28, -1032.4, 502.19, 1.44862, 0, 0, 0.66262, 0.748956, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+23, 181087, 0, -4853.44, -1031.29, 502.19, 0.90757, 0, 0, 0.438371, 0.898794, 120, 120, 100, 1, 0, 0, 7, 10);
INSERT INTO `game_event_gameobject` SELECT gameobject.guid, @POPULARITY_CONTEST_WINNER_IRONFORGE_EVENT FROM `gameobject` WHERE gameobject.guid BETWEEN @POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+1 AND @POPULARITY_CONTEST_WINNER_IRONFORGE_GGUID+23;

-- Stormwind Contest Winning Gameobjects.
INSERT INTO `gameobject` (`guid`, `id`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecsmin`, `spawntimesecsmax`, `animprogress`, `state`, `spawn_flags`, `visibility_mod`, `patch_min`, `patch_max`) VALUES
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+1, 181016, 0, -8445.91, 333.747, 122.163, 1.97222, 0, 0, 0.833885, 0.551938, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+2, 181016, 0, -8441.12, 337.44, 122.163, 2.33874, 0, 0, 0.920505, 0.390732, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+3, 181025, 0, -8434.54, 312.12, 122.283, 2.02458, 0, 0, 0.848047, 0.529921, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+4, 181025, 0, -8423.04, 321.285, 122.056, 2.44346, 0, 0, 0.939692, 0.34202, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+5, 181086, 0, -8442.19, 333.947, 122.579, 2.23402, 0, 0, 0.898793, 0.438373, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+6, 181087, 0, -8448.16, 333.07, 121.746, 1.44862, 0, 0, 0.66262, 0.748956, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+7, 181087, 0, -8447.96, 335.173, 121.746, 0.90757, 0, 0, 0.438371, 0.898794, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+8, 181087, 0, -8447.25, 334.477, 121.746, 2.58308, 0, 0, 0.961261, 0.27564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+9, 181087, 0, -8447.2, 335.362, 121.746, 2.93214, 0, 0, 0.994521, 0.104536, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+10, 181087, 0, -8442.42, 337.867, 122.071, 6.14356, 0, 0, -0.0697556, 0.997564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+11, 181087, 0, -8442.35, 336.626, 122.163, 4.15388, 0, 0, -0.874619, 0.48481, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+12, 181087, 0, -8442.13, 338.372, 121.746, 4.17134, 0, 0, -0.870356, 0.492424, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+13, 181087, 0, -8441.14, 338.776, 121.746, 1.32645, 0, 0, 0.615661, 0.788011, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+14, 181087, 0, -8439.51, 338.919, 121.746, 2.19911, 0, 0, 0.891006, 0.453991, 120, 120, 100, 1, 0, 0, 7, 10);
INSERT INTO `game_event_gameobject` SELECT gameobject.guid, @POPULARITY_CONTEST_WINNER_STORMWIND_EVENT FROM `gameobject` WHERE gameobject.guid BETWEEN @POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+1 AND @POPULARITY_CONTEST_WINNER_STORMWIND_GGUID+14;

-- Darnassus Contest Winning Gameobjects (I did this already last year but some stuff is missing, thats why i delete the old objects).
DELETE FROM `gameobject` WHERE `guid` IN (SELECT `guid` FROM `game_event_gameobject` WHERE `event`=@POPULARITY_CONTEST_WINNER_DARNASSUS_EVENT);
INSERT INTO `gameobject` (`guid`, `id`, `map`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecsmin`, `spawntimesecsmax`, `animprogress`, `state`, `spawn_flags`, `visibility_mod`, `patch_min`, `patch_max`) VALUES
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+1, 181016, 1, 9667.78, 2529.11, 1360, 0.244346, 0, 0, 0.121869, 0.992546, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+2, 181016, 1, 9668.83, 2521.06, 1360, 5.88176, 0, 0, -0.199368, 0.979925, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+3, 181021, 1, 9892.4, 2238.72, 1343.61, 6.19592, 0, 0, -0.0436192, 0.999048, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+4, 181021, 1, 9892.59, 2223.51, 1343.63, 0.0174525, 0, 0, 0.00872612, 0.999962, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+5, 181021, 1, 9893.36, 2207.54, 1343.76, 0.0349062, 0, 0, 0.0174522, 0.999848, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+6, 181021, 1, 9985.94, 1978.34, 1352.14, 4.67748, 0, 0, -0.719339, 0.694659, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+7, 181021, 1, 9986.28, 2022.9, 1351.84, 1.6057, 0, 0, 0.719339, 0.694659, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+8, 181021, 1, 10013.6, 2242.08, 1343.91, 3.24635, 0, 0, -0.998629, 0.0523532, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+9, 181021, 1, 10014, 2226.74, 1343.69, 3.15906, 0, 0, -0.999962, 0.00873464, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+10, 181021, 1, 10014.4, 2211.14, 1343.83, 3.10665, 0, 0, 0.999847, 0.0174693, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+11, 181024, 1, 9657.08, 2523.52, 1372, 3.15906, 0, 0, -0.999962, 0.00873464, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+12, 181024, 1, 9663.88, 2525.11, 1369.32, 0.0523589, 0, 0, 0.0261765, 0.999657, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+13, 181025, 1, 9655.11, 2530.81, 1360.8, 3.4383, 0, 0, -0.989016, 0.147811, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+14, 181025, 1, 9657.18, 2516.03, 1361, 3.31614, 0, 0, -0.996194, 0.087165, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+15, 181025, 1, 9663.72, 2531.88, 1361.8, 0.0174525, 0, 0, 0.00872612, 0.999962, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+16, 181025, 1, 9664.04, 2517.89, 1361.6, 0.279252, 0, 0, 0.139173, 0.990268, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+17, 181055, 1, 10119.3, 2216.15, 1351.82, 2.16421, 0, 0, 0.882947, 0.469473, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+18, 181055, 1, 10144.3, 2233.66, 1352.2, 2.16421, 0, 0, 0.882947, 0.469473, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+19, 181086, 1, 9666.13, 2524.86, 1360, 6.26573, 0, 0, -0.00872612, 0.999962, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+20, 181087, 1, 9668.46, 2530.89, 1360, 6.14356, 0, 0, -0.0697556, 0.997564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+21, 181087, 1, 9669.52, 2522.5, 1360, 2.58308, 0, 0, 0.961261, 0.27564, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+22, 181087, 1, 9669.66, 2531.11, 1360, 0.90757, 0, 0, 0.438371, 0.898794, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+23, 181087, 1, 9669.83, 2517.64, 1360, 4.15388, 0, 0, -0.874619, 0.48481, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+24, 181087, 1, 9670.36, 2521.82, 1360, 4.17134, 0, 0, -0.870356, 0.492424, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+25, 181087, 1, 9671.04, 2530.81, 1360, 1.32645, 0, 0, 0.615661, 0.788011, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+26, 181087, 1, 9671.11, 2519.33, 1360, 1.44862, 0, 0, 0.66262, 0.748956, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+27, 181087, 1, 9671.14, 2520.84, 1360, 2.93214, 0, 0, 0.994521, 0.104536, 120, 120, 100, 1, 0, 0, 7, 10),
    (@POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+28, 181087, 1, 9672.08, 2529.96, 1360, 2.19911, 0, 0, 0.891006, 0.453991, 120, 120, 100, 1, 0, 0, 7, 10);
INSERT INTO `game_event_gameobject` SELECT gameobject.guid, @POPULARITY_CONTEST_WINNER_DARNASSUS_EVENT FROM `gameobject` WHERE gameobject.guid BETWEEN @POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+1 AND @POPULARITY_CONTEST_WINNER_DARNASSUS_GGUID+28;


-- End of migration.
END IF;
END??
delimiter ; 
CALL add_migration();
DROP PROCEDURE IF EXISTS add_migration;
